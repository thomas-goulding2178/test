<!DOCTYPE html>
<html>
<head>
	<title>Ping Pong Game</title>
</head>
<body>
	<canvas id="canvas" width="800" height="400" style="border:1px solid #000000;"></canvas>
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript">
		
		var HEIGHT = 400
		var WIDTH = 800
		
		UpdatePlayerPositions = function(){				
			if(app.getNode('RightPaddle').pressingDown)
				app.getNode('RightPaddle').y += 2;	
			if(app.getNode('RightPaddle').pressingUp)
				app.getNode('RightPaddle').y -= 2;	
			if(app.getNode('LeftPaddle').pressingDown)
				app.getNode('LeftPaddle').y += 2;	
			if(app.getNode('LeftPaddle').pressingUp)
				app.getNode('LeftPaddle').y -= 2;	
			if (app.getNode('LeftPaddle').y < 0)
				app.getNode('LeftPaddle').y = 0;
			if (app.getNode('LeftPaddle').y + app.getNode('LeftPaddle').height > HEIGHT)
				app.getNode('LeftPaddle').y = HEIGHT - app.getNode('LeftPaddle').height;
			if (app.getNode('RightPaddle').y < 0)
				app.getNode('RightPaddle').y = 0;
			if (app.getNode('RightPaddle').y + app.getNode('RightPaddle').height > HEIGHT)
				app.getNode('RightPaddle').y = HEIGHT - app.getNode('RightPaddle').height;
		};
		
		CheckKeyPress = function(){
			document.onkeydown = function(event){
				if(event.keyCode === 40)	//downarrow
					app.getNode('RightPaddle').pressingDown = true;
				else if(event.keyCode === 38) // uparrow
					app.getNode('RightPaddle').pressingUp = true;
				else if(event.keyCode === 83)	//s
					app.getNode('LeftPaddle').pressingDown = true;
				else if(event.keyCode === 87) // w
					app.getNode('LeftPaddle').pressingUp = true;
			}
		};
		
		CheckKeyRelease = function(){
			document.onkeyup = function(event){
				if(event.keyCode === 40)	//downarrow
					app.getNode('RightPaddle').pressingDown = false;
				else if(event.keyCode === 38) // uparrow
					app.getNode('RightPaddle').pressingUp = false;
				else if(event.keyCode === 83)	//s
					app.getNode('LeftPaddle').pressingDown = false;
				else if(event.keyCode === 87) // w
					app.getNode('LeftPaddle').pressingUp = false;
			}
		};
			
		app.onInit = function(){
			this.nodes.push({
				id : 'LeftPaddle',
				x  : 100,
				y  : 150,
				width  : 10,
				height : 100,
				color  : 'black',
				pressingLeft : false,
				pressingRight : false,
				pressingUp : false,
				pressingDown : false,
			});

			this.nodes.push({
				id : 'RightPaddle',
				x  : 690,
				y  : 150,
				width  : 10,
				height : 100,
				color  : 'black',
				pressingLeft : false,
				pressingRight : false,
				pressingUp : false,
				pressingDown : false,
			});
		};

 		app.onUpdate = function(time){
		
			CheckKeyPress();
			CheckKeyRelease();
			UpdatePlayerPositions(); 

		}; 
	</script>
</body>
</html>